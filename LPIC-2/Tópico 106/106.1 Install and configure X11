Terms and Utilities:

- A interface X ou o servidor X, sistema X, nada mais que é que uma interface gráfica que o Linux disponibiliza para o usuário.

- O X11 ou Xorg11 é uma implementação dessa interface X.

- Hoje em dia quase todas as distros usam o X11 ou o Xorg.

- É importante entender que o servidor X ou o X11, é a interface gráfica mais básica do Linux, é pelo X controle do botão do mouse, clique do botão direito, botão esquerdo, quantos monitores estão configurados, qual a resolução, tamanho, esse tipo de configuração é tudo feito e controlado pelo servidor X.

- Em cima de servidor X, rodam os gerenciadores de janelas, mais conhecidos como, Gnome, XFCE, kDE.

- Além disso tem o display maneger (tela de login assim que vc liga a máquina, bem vindo, usuário e senha).

- É importante saber que o X funciona num modelo de cliente/servidor.

- Servidor X (X é a interface gráfica) e todos os programas que rodam em cima do servidor X, são clientes do servidor X.

- quando eu abro o Mozilla, ele é um cliente do servidor X.

  - servidor X que prove as funcionalidades gráficas e os clientes X.
  - se eu abrir o xcalc no terminal, ele é uma aplicação cliente do servidor X.

-- Arquivo de configuração mais importante do X11 (/etc/X11/xorg.conf)

#####/etc/X11/xorg.conf ()

- nas distribuições novas esse arquivo nem existe mais, porque tudo é detectado no momento do boot, 
tem suporte para monitores, teclados, mouses, tudo é automático.

- para gerar ele, temos que seguir os seguintes passos:

1) tem que matar o processo do Xorg que está rodando no tty7. (interface gráfica.)

2) Entrar em outro terminal sem interface gráfica, tty1.

3) depois mudar para o multi.target (systemctl isolate multi-user.target)

4) Para gerar o arquivo de configuração, deve executar o comando:

$Xorg -configure (o arquivo X foi gerado no  /root)

5) copiar esse arquivo para /etc/X11/xorg.conf (criado o arquivo).

-- O que aprender com esse arquivo de configuração (/etc/X11/xorg.conf)

- ele terá sessões, veja alguns modelos de sessões: Sessão de layout, monitor, mouse, dispositivos.
- blocos de configuração.


- bloco "Files"
- bloco utilizado para indicar os módulos utilizados pela interface X11, e aonde estão as fontes utilizadas. 
(onde o X procura as fontes para o usuário).

Section "Files"
# These folders do not exist
    FontPath        "/usr/share/fonts/X11/misc"
    FontPath        "/usr/share/fonts/X11/100dpi"
# No files in here    FontPath        "/usr/share/X11/fonts/75dpi"
# removed this tail   /:unscaled"
# No files here either    FontPath        "/usr/share/X11/fonts/Type1"
# path to defoma fonts
    FontPath        "/var/lib/defoma/x-ttcidfont-conf.d/dirs/TrueType"
    RgbPath         "/usr/X11R6/lib/X11/rgb"
EndSection

#Section "InputDevice"
    Identifier     "Ergonomic4000"
    Driver         "kbd"
    Option         "CoreKeyboard"
    Option         "XkbRules" "xorg"
    Option         "XkbModel" "pc105"
    Option         "XkbLayout" "us"
    Option         "XkbOptions" "lv3:ralt_switch"
      Would be nice if the top ribbon web buttons worked
      and the Zoom slider in the centre
      and back/forward buttons
EndSection

- terá sempre esse identificador, para saber qual tipo de device é, driver, modelo do teclado. Pode incluir opções de configuração nessa sessão.

- Por exemplo, se algo não está funcionando direito com o teclado, pode ser que eu precise incluir alguma opção aqui, ou outro driver, dentro desse bloco.

Section "InputDevice"
    Identifier     "Razer Copperhead"
    Driver         "mouse"
    Option         "CorePointer"
    Option         "Device" "/dev/input/mice"
    Option         "Protocol" "ExplorerPS/2"
    Option         "ZAxisMapping" "4 5"
          ZAxis mapping is the scrolling. Exclude from list below
    Option         "Emulate3Buttons" "true"
    Option         "Buttons" "9"
    Option         "ButtonMapping" "1 2 3 6 7 8 9"
          3 is the wheel click
          6 & 7 and 8 & 9 are on the sides of the mouse - and hard to press
EndSection

#Section "Monitor"
    Identifier     "SyncMaster-226BW"
    VendorName     "Samsung"
    HorizSync       30.0 - 81.0
    VertRefresh     56.0 - 75.0
    Option         "DPMS"
  More Options...
EndSection

#Section "Device"
    Identifier     "Left nVidia 8600GT"
    Driver         "nvidia"
  For use after kernel upgrades kills nVidia proprietory
  Also turn off RightScreen
     Driver         "nv"
    VendorName      "NVIDIA Corporation"
    BoardName       "GeForce 8600 GT"

    PCI-Express 16x bus
    BusID          "PCI:7:0:0"
  Appears as PCI:4 on other machines
      BusID             "PCI:1:0:0"  this is AGP
    Screen          0
          Options...
EndSection

Section "Screen"
        Identifier      "RightScreen"
        Device          "Right nVidia 8600GT"
        Monitor         "SyncMaster-226BW"
        # Compositing manager
        Option         "RenderAccel" "true"
        Option         "TripleBuffer" "true"
        Option         "AllowGLXWithComposite"
        Option         "DPMS" "true"
        DefaultDepth    24
        SubSection "Display"
                Depth           24
                Modes           "1680x1050"
        EndSubSection
        # Even though the SyncMaster and the Viewsonic are 1050, the Viewsonic is 10mm taller. Syncmaster has a finer dot pitch, but less physical real estate
EndSection

#xdpyinfo (mostra informações/opções da interface X, consigo ver a versão, o Xorg, e as opções da tela, display).

$xdpyinfo | less

#xwininfo (mostra informações sobre uma janela do sistema, dimensão, ajustes, tamanho, comprimento)

- assim que vc aperta "enter" ele vai pedir para selecionar uma janela.

$xwininfo + enter

xwininfo: Please select the window about which you
          would like information by clicking the
          mouse in that window.

xwininfo: Window id: 0x2200015 "Configurações"

  Absolute upper-left X:  474
  Absolute upper-left Y:  96
  Relative upper-left X:  474
  Relative upper-left Y:  96
  Width: 881
  Height: 566
  Depth: 32
  Visual: 0x16c
  Visual Class: TrueColor

-- Outro comando importante para a prova é o xvinfo.

#xvinfo (exibe as capacidades dos adaptadores de vídeo que estão utilizando o X).

####Fontes no X

- A interface X ela utiliza e disponibiliza um conjunto de fontes.
- O usuário pode adicionar as fontes para utilizar dentro da interface X.
- São os dois principais tipos de fontes:

- bitmap fonts (tipo mais simples)

- outline fonts (mais utilizado e possui mais opções gráficas para as fontes).

- as fontes ficam dentro da Section "Files" no arquivo "/usr/share/fonts/X11"

- dentro do diretório Type1 existem alguns modelos de fontes, fontes de todo o sistema.

-- é importante notar que sempre vai ter dois arquivos de fontes, que são:

/usr/share/fonts/X11/Type1$ls f*
fonts.dir  fonts.scale

-- esses dois arquivos ssão tipo um indice das fontes, o X precisa desses arquivos para referenciar e utilizar essas fontes.

-- para gerar esses dois arquivos utilizamos dois comandos, que são:

$mkfontscale (esse comando gera o arquivo fonts.scale, é importante gerar esse arquivo primeiro).

$mkfontdir (gera o arquivo fonts.dir)

-- como dito na aula anterior, temos a opção de ter o servidor de fontes.



#### Estudar agora o lado do cliente do servidor. (lembrando que o X é o servidor de interface gráfica e nele rodam os clientes X
que são aplicações do clientes do servidor X).

- uma observação, esse lado cliente servidor, além de poder ser utilizado localmente, é possível ser usado entre máquinas diferentes,
eu posso a partir de uma máquina executar um programa só que esse programa ser exibido no servidor X que está em outra máquina.

- nessa aula vamos fazer um teste para ver o programa rodando em uma máquina e o programa ser exibido no servidor X de outra máquina.

- primeiramente vamos configurar a VM para iniciar em modo bridge, assim cada sistema ficará com um IP diferente em questão de redes.

- vamos iniciar a configuração da variavel DISPLAY:

$echo $DISPLAY (essa variavel indica onde as janelas vão ser exibidas, variavel do shell, o shell vai identificar através da variavel DISPLAY quem deve exibir essa informação, o servidor X local ou é o servidor X de outra máquina)
:0

$echo $DISPLAY 
:0

#xhost (esse comando libera uma máquina para aceitar a configuração de outra máquina) *existe um controle na outra máquina que impede que novas sessões do X possam conectar nessa máquina, temos que usar o comando xhost.













xhost
DISPLAY
X
