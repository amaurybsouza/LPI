Terms and Utilities:


# CONCEITOS INICIAIS:

- cada usuário tem a sua conta, sua informação de login e temos os grupos que nada mais são que os grupos de usuários.
- grupos são entidades que reunem usuários.
- cada usuário tem seu grupo padrão, e cada usuário pode estar em vários grupos secundários.


#/etc/passwd (informações de contas de usuários do sistema) ***arquivo principal que registra todos os usuários***

1)    - Formato do arquivo: root:x:0:0:root:/root:/bin/bash
      - amaury:x:1000:1000:Amaury B. Souza,,,:/home/amaury:/bin/bash

2) Cada usuário é representado por uma linha e em campos separados por (:) respectivamente:

- Nome de Login;
- Senha ( "x" quando usando o arquivo /etc/shadow);
- Número de identificação do usuário (UID);
- Número do grupo principal do usuário (GID);
- Descrição do usuário (opcional);
- Diretório pessoal para o usuário; (/home/usuário)
- Shell inicial do usuário (normalmente é o /bin/bash)

obs: quando tiver /bin/false (ID de sistemas), não consegue logar, porque não existe shell para interagir.


3) O usuário root terá sempre o UID e o GID 0. Nesse arquivo existem diversos usuários do sistema, 
de aplicações que precisam de usuários para rodar.
  a) um exemplo é o daemon (processo daemon fica sempre em execução provendo algum serviço).
  b) os usuários normais estão usando o ID a partir de 1000, sempre que criar um usuário novo ele vai ter ID a partir de 1000.
  c) antes de 1000 são ID's de sistema, antes de 500 são UID de sistemas e a partir de 1000  são de usuários normais.
  d) posso alterar manualmente o arquivo /etc/passwd, mas existem comandos que fazem isso e é a melhor prática.



#/etc/shadow (arquivo que contem as senhas dos usuários)

1) - cada usuário também possui uma linha, separada por (:)
   - Formato: amaury:$6$XjkKHhLB$BeLhnGULz/sjkisB3Captti04gbiGR5VyAedRGONxU1AmOxw1nhpLDmUCqrOIyZqDmQeVXYGmmLQ1MKwDz/YM.:17649:0:99999:7:::
   
- Nome do usuário;
- hash com a senha do usuário; (quando é criada a senha o sistema transforma a senha nesse hash)
- vai ter também algumas configurações como (data de expiração da senha, data de troca da senha)



#/etc/group (equivalente ao /etc/passwd mas para grupos, tem os grupos, ID's e os usuários que pertencem aos grupos)

1) - Formato do arquivo: amaury:x:1000:

- Nome do grupo;
- Senha do grupo;
- ID do grupo
- e por último os usuários que pertencem a esse grupo (sambashare:x:126:amaury)

2) O arquivo /etc/group também tem o arquivo de senhas dele, que é o arquivo /etc/gshadow

3) Outro arquivo importante é o arquivo: /etc/login.defs
   
   a) esse arquivo tem as definições de logins de cada usuário.
   b) tem a definição dos ID dos usuparios, posso configurar de 1000 para 2000 e o UID máximo. 
   c) tem um parãmetro chamado CREATE HOME, essa config faz com que seja criado o /home de todos os usuarios do sistema, adicionar o "yes".


### REVISANDO OS ARQUIVOS PRINCIPAIS:

- /etc/passwd
- /etc/shadow
- /etc/group
- /etc/gshadow
- /etc/login.defs



#/etc/skel/

#chage

#getent

#groupadd

#groupdel

#groupmod

#passwd



### COMANDOS PARA GESTÃO DE USUÁRIOS NO SISTEMA:


#useradd (adiciona um usuário no sistema)

- Esse comando não define a senha do usuário.
- O shell padrão do useradd é o /bin/sh.


1) $useradd usuario1 (cria um usuário no sistema)

2) $useradd -c "Nome do usuário" -s /bin/bash usuario2

3) Opções do useradd:

-d : homedir do usuário.
-s : shell que o usuário vai usar.
-c : descrição (comentários).
-m : cria o diretório /home.
-u : especifica um UID.
-g : especifica um grupo primário.
-G : relaciona o usuário a grupos.
-k : escolhe um diretório de skel alternativo.
-e : cria o usuário com data para sua conta expirar.

4) Exemplos do comando useradd:

- Criando um usuário com login user1, homedir /home/user1, shell /bin/bash e nome “Operador 1”:
  
  $useradd –m –d /home/user1 –s /bin/bash –c “Operador 1” user1

- Criando usuário webmaster com UID 1400, grupo primário cdrom, grupos relacionados audio e backup, shell /bin/bash e homedir /var/www/webmaster:
  
  $useradd –m –d /var/www/webmaster –u 1400 –g cdrom –G audio,backup –s /bin/bash webmaster

- Criando usuário user2 com data de expiração da conta para 10/12/2016, sem uso de shell e com diretório de skel alternativo /dados :
  
  $useradd –m –s /bin/false –e 2016-12-10 –k /dados user2


#userdel (remove um usuário do sistema)


1) $userdel usuario1 (remove esse usuário do sistema).
   
   - esse comando não apaga o /home do usuário, ele apaga dos arquivos (passwd, shadow e group)
   - isso é para evitar que o administrador de sistemas não apague os dados de usuário por erros, o /home sempre prevalece.

2) $userdell -r usuario1 (removendo todos os registros do usuario, inclusive o /home)

Opções:

-r: remove o diretório padrão do usuário (/home/).


#usermod (alterar as configurações de um usuário do sistema)











