Terms and Utilities:

# SISTEMA DE GERENCIAMENTO DE LOGS DO LINUX (SYSLOG).


1) Introdução:

- Sabemos que no sistema existem diversas aplicações que rodam simultaneamente, serviços e ambos vão gerando logs, registros.
- Para que o administrador possa gerenciar esses registros, existe o sistema de gerenciamento de logs.

#syslogd (principal sistema de gerenciamento de logs) * "sislogd" (deamon do syslog, fica sempre em execução)

- hoje em dia temos também o "rsyslog" (melhoria do syslog, performance, sistema de logs mais encontrado em desktops, Debian, Fedora).

- "syslog" é o principal para nosso estudo para a certificação.
- Existe também um 3º sistema de logs que é o "syslog-ng" (não é semelhante ao syslog, muda os arquivos, forma de funcionamento).

#/var/log/ (principal diretório de logs do Linux) 

- principais arquivos de logs são armazenados aqui nesse diretório.


#/etc/syslog.conf (arquivo de configuração do syslog) * cai na prova.

  > CONFIGURAÇÃO DO SYSLOG: /etc/syslog.conf

------------------------------------------------------------------------------------------------------------
# First some standard logfiles.  Log by facility.
#
##Facility.Priority                    Action
#
#Facility                 = o criador da mensagem
#                         = auth, authpriv, cron, daemon, kern, lpr, mail, mark news, syslog, user, uucp, local0-local7
#priority/nivel           = urgência/importância da mensagem
#                         = debug, info, notice, warning (warn), err (error), crit, alert, emerg (panic)
#action                   = destino das mensagens 

auth,authpriv.*                 /var/log/auth.log
*.*;auth,authpriv.none          -/var/log/syslog
#cron.*                         /var/log/cron.log
daemon.*                        -/var/log/daemon.log
kern.*                          -/var/log/kern.log
lpr.*                           -/var/log/lpr.log
mail.*                          -/var/log/mail.log
user.*                          -/var/log/user.log
uucp.*                          /var/log/uucp.log

# Logging for the mail system.  Split it up so that
# it is easy to write scripts to parse these files.
#
mail.info                       -/var/log/mail.info
mail.warn                       -/var/log/mail.warn
mail.err                        /var/log/mail.err
--------------------------------------------------------------------------------------------------------------
auth,authpriv.*                 /var/log/auth.log (linha com o registro de cada tipo de log)
= auth, authpriv, cron, daemon, kern, lpr, mail  (lista com os tipos de mensagem) * auth, authpriv (autenticação)
                                                  local0-local7 (tipo que eu posso usar para scripts, aplicações)

"--> Exemplo do arquivo /etc/syslog.conf com a linha abaixo:"
mail.info                       -/var/log/mail.info 
-mail é o facility (criador da mensagem) .info (priority/ (info) é o nivel da mensagem) *notice,warning,error,crit,alert


"- Importante lembrar o significado da linha abaixo:"
#                         = debug, info, notice, warning (warn), err (error), crit, alert, emerg (panic)
- quanto mais para a esquerda "menos urgência" (mais log gerado) | mais a direita "mais critíco" (menos log gerado)


- action (destino da mensagem) -> -/var/log/mail.info  (posso enviar para um arquivo de log)
                               -> lpi1, lpi2           (posso enviar para um usuário) *tela do usuário
                               -> @10.0.0.1            (posso enviar para um servidor remoto) *segurança, sempre ter os log, vai que dá pau...

"--> Mais um exemplo com a linha abaixo:"
mail.*                          -/var/log/mail.log 
- todo registro que vem do facility "mail", "asterisco" significa (qualquer que seja a priority), vai enviar para "/var/log/mail.log"

daemon.*                        -/var/log/daemon.log
- todo registro que vem com o facility "daemon", seja qual for o log "*", ele vai enviar para o "/var/log/daemon.log"

- posso separar os facilities por virgula (auth,authpriv.*), tudo isso será enviado para o /var/log/auth.log

- na linha abaixo, qualquer que seja o facility, ou o priority, o ; separa uma outra regra (;auth,authpriv.none) *com excessão do auth e authpriv
*.*;auth,authpriv.none          -/var/log/syslog

- criando um log somente para "alert":
mail.=alert                      /var/log/mail.alert (pega apenas o alert)

- exemplo com o log "info":
mail.info                       -/var/log/mail.info  (pega tudo que vai depois de info) *info,notice,warning(warn),err(error),crit,alert,emerg(panic)

- criando um log para um servidor de log remoto externo:  *servidor de log remoto roda na porta 514 no protocolo UDP.
mail.debug                       @10.0.0.100 

mail.emerg                       *                    (joga na tela de todos os usuários a mensagem, terminal)
mail.emerg                       lpi1, lpi2




#klogd


#logger

#logrotate

#/etc/logrotate.conf

#/etc/logrotate.d/

#journalctl

#/etc/systemd/journald.conf

#/var/log/journal/
